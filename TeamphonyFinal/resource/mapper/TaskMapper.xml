<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="teamphony.store.mapper.TaskMapper">





	<insert id="insertTask" parameterType="task">
		<selectKey resultType="int" keyProperty="taskId" order="BEFORE">
			SELECT TASK_TB_ID_SEQ.NEXTVAL
			FROM DUAL
		</selectKey>
			INSERT
			INTO TASK_TB
			(
				ID,
				TITLE,
				CONTENTS,
				DEADLINE,
				FLAG,
				EVALUATIONPERIODSTART,
				EVALUATIONPERIODEND,
				POINT
			)
			VALUES
			(
				#{taskId},
				#{title},
				#{contents, jdbcType=VARCHAR},
				#{deadline, jdbcType=DATE},
				#{flag, jdbcType=INTEGER},
				#{evaluationPeriodStart, jdbcType=DATE},
				#{evaluationPeriodEnd, jdbcType=DATE},
				#{point, jdbcType=INTEGER}
			)
	</insert>  


	<select id="selectAllTask" resultType="Task">
			SELECT 
				ID							AS taskId,
				TITLE,                  
				CONTENTS,               
				DEADLINE,               
				EVALUATIONPERIODSTART,  
				EVALUATIONPERIODEND,    
				FLAG,                   
				POINT                  
				FROM TASK_TB            
				ORDER BY ID ASC
	</select>
	
	<select id="selectTaskByTaskId" resultType="Task">
			SELECT 
				ID						AS taskId,
				TITLE,                  
				CONTENTS,               
				DEADLINE,               
				EVALUATIONPERIODSTART,  
				EVALUATIONPERIODEND,    
				FLAG,                   
				POINT                  
       			FROM TASK_TB 
			WHERE ID= #{taskId}  
	</select>
	
	<delete id="deleteTask"  parameterType="int">
			DELETE
			FROM TASK_TB
			WHERE ID	= #{taskId}
	</delete>
	
	<update id="updateTask" parameterType="task">
			UPDATE TASK_TB		
				SET
				ID =						#{taskId}
				,TITLE =					#{title}
				,CONTENTS =					#{contents}
				,DEADLINE =					#{deadline , jdbcType=DATE}
				,EVALUATIONPERIODSTART =	#{evaluationPeriodStart ,jdbcType=DATE}
				,EVALUATIONPERIODEND =		#{evaluationPeriodEnd ,jdbcType=DATE}
			WHERE ID = #{taskId}
	</update>


</mapper>